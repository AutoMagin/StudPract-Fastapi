{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zo-al\\\\Desktop\\\\studa_practe\\\\frontend\\\\src\\\\components\\\\Profile.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/Profile.js\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { userService } from '../services/userService';\nimport { postService } from '../services/postService';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { useLoading } from '../contexts/LoadingContext';\nimport { Typography, Box, Button } from '@mui/material';\nimport Post from './Post';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Profile() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [profile, setProfile] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [error, setError] = useState(null);\n  const {\n    setLoading\n  } = useLoading();\n  useEffect(() => {\n    const fetchProfile = async () => {\n      setLoading(true);\n      try {\n        const userResponse = await userService.get(id);\n        setProfile(userResponse);\n        const postsResponse = await postService.getPostsByUser(id);\n        setPosts(postsResponse);\n      } catch (err) {\n        var _err$response, _err$response2, _err$response3, _err$response3$data;\n        setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 ? 'Необходима авторизация' : ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 404 ? 'Пользователь или посты не найдены' : ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.detail) || err.message || 'Произошла ошибка при загрузке профиля');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProfile();\n  }, [id, setLoading]);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 12\n    }, this);\n  }\n  if (!profile) {\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      className: \"container\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 12\n    }, this);\n  }\n  const isOwnProfile = user && user.id === parseInt(id);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: [\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \", profile.name || `User ${profile.id}`]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"subtitle1\",\n      children: [\"\\u041B\\u043E\\u0433\\u0438\\u043D: \", profile.login]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), isOwnProfile && /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      component: \"a\",\n      href: `/users/${id}/update`,\n      style: {\n        margin: '1rem 0'\n      },\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      style: {\n        marginTop: '2rem'\n      },\n      children: \"\\u041F\\u043E\\u0441\\u0442\\u044B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), posts.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n      children: \"\\u041D\\u0435\\u0442 \\u043F\\u043E\\u0441\\u0442\\u043E\\u0432\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n      post: post,\n      className: \"post\"\n    }, post.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(Profile, \"7F32sPGQdslhcYOld1PpG7ghRms=\", false, function () {\n  return [useParams, useLoading];\n});\n_c = Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","userService","postService","AuthContext","useLoading","Typography","Box","Button","Post","jsxDEV","_jsxDEV","Profile","_s","id","user","profile","setProfile","posts","setPosts","error","setError","setLoading","fetchProfile","userResponse","get","postsResponse","getPostsByUser","err","_err$response","_err$response2","_err$response3","_err$response3$data","response","status","data","detail","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isOwnProfile","parseInt","variant","gutterBottom","name","login","color","component","href","style","margin","marginTop","length","map","post","_c","$RefreshReg$"],"sources":["C:/Users/zo-al/Desktop/studa_practe/frontend/src/components/Profile.js"],"sourcesContent":["// frontend/src/components/Profile.js\r\nimport React, { useEffect, useState, useContext } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { userService } from '../services/userService';\r\nimport { postService } from '../services/postService';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { useLoading } from '../contexts/LoadingContext';\r\nimport { Typography, Box, Button } from '@mui/material';\r\nimport Post from './Post';\r\n\r\nexport function Profile() {\r\n  const { id } = useParams();\r\n  const { user } = useContext(AuthContext);\r\n  const [profile, setProfile] = useState(null);\r\n  const [posts, setPosts] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const { setLoading } = useLoading();\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const userResponse = await userService.get(id);\r\n        setProfile(userResponse);\r\n        const postsResponse = await postService.getPostsByUser(id);\r\n        setPosts(postsResponse);\r\n      } catch (err) {\r\n        setError(\r\n          err.response?.status === 401\r\n            ? 'Необходима авторизация'\r\n            : err.response?.status === 404\r\n            ? 'Пользователь или посты не найдены'\r\n            : err.response?.data?.detail || err.message || 'Произошла ошибка при загрузке профиля'\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, [id, setLoading]);\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Ошибка: {error}</div>;\r\n  }\r\n\r\n  if (!profile) {\r\n    return <Typography className=\"container\">Загрузка...</Typography>;\r\n  }\r\n\r\n  const isOwnProfile = user && user.id === parseInt(id);\r\n\r\n  return (\r\n    <Box className=\"container\">\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Профиль {profile.name || `User ${profile.id}`}\r\n      </Typography>\r\n      <Typography variant=\"subtitle1\">Логин: {profile.login}</Typography>\r\n      {isOwnProfile && (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          component=\"a\"\r\n          href={`/users/${id}/update`}\r\n          style={{ margin: '1rem 0' }}\r\n        >\r\n          Обновить профиль\r\n        </Button>\r\n      )}\r\n      <Typography variant=\"h5\" gutterBottom style={{ marginTop: '2rem' }}>\r\n        Посты\r\n      </Typography>\r\n      {posts.length === 0 ? (\r\n        <Typography>Нет постов</Typography>\r\n      ) : (\r\n        posts.map((post) => <Post key={post.id} post={post} className=\"post\" />)\r\n      )}\r\n    </Box>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}