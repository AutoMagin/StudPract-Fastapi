{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zo-al\\\\Desktop\\\\studa_practe\\\\frontend\\\\src\\\\components\\\\Update.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { userService } from '../services/userService';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { useLoading } from '../contexts/LoadingContext';\nimport { TextField, Button, Typography, Box } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Update() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [name, setName] = useState('');\n  const [error, setError] = useState(null);\n  const {\n    setLoading\n  } = useLoading();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!user) {\n      navigate('/auth');\n      return;\n    }\n    if (user.id !== parseInt(id)) {\n      navigate(`/users/${user.id}`);\n      return;\n    }\n    setLoading(true);\n    userService.get(id).then(response => {\n      setName(response.name || '');\n      setLoading(false);\n    }).catch(err => {\n      setError(err.message);\n      setLoading(false);\n    });\n  }, [id, user, setLoading, navigate]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      await userService.update(id, {\n        name\n      });\n      navigate(`/users/${id}`);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"update\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u0418\\u043C\\u044F\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        fullWidth: true,\n        margin: \"normal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        style: {\n          marginTop: '1rem'\n        },\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(Update, \"E5CsH3/w/o1dkDBFe8DeT5csHL0=\", false, function () {\n  return [useParams, useLoading, useNavigate];\n});\n_c = Update;\nvar _c;\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","userService","AuthContext","useLoading","TextField","Button","Typography","Box","jsxDEV","_jsxDEV","Update","_s","id","user","name","setName","error","setError","setLoading","navigate","parseInt","get","then","response","catch","err","message","handleSubmit","e","preventDefault","update","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","gutterBottom","onSubmit","label","value","onChange","target","fullWidth","margin","type","color","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/zo-al/Desktop/studa_practe/frontend/src/components/Update.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { userService } from '../services/userService';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { useLoading } from '../contexts/LoadingContext';\r\nimport { TextField, Button, Typography, Box } from '@mui/material';\r\n\r\nexport function Update() {\r\n  const { id } = useParams();\r\n  const { user } = useContext(AuthContext);\r\n  const [name, setName] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const { setLoading } = useLoading();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/auth');\r\n      return;\r\n    }\r\n\r\n    if (user.id !== parseInt(id)) {\r\n      navigate(`/users/${user.id}`);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    userService\r\n      .get(id)\r\n      .then((response) => {\r\n        setName(response.name || '');\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setError(err.message);\r\n        setLoading(false);\r\n      });\r\n  }, [id, user, setLoading, navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await userService.update(id, { name });\r\n      navigate(`/users/${id}`);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Ошибка: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <Box className=\"update\">\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Обновить профиль\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Имя\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          fullWidth\r\n          style={{ marginTop: '1rem' }}\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </form>\r\n    </Box>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}