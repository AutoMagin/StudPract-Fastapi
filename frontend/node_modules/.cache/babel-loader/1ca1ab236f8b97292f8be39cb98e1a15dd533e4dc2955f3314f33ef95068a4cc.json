{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zo-al\\\\Desktop\\\\studa_practe\\\\frontend\\\\src\\\\components\\\\Update.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/Update.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { userService } from '../services/userService';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { useLoading } from '../contexts/LoadingContext';\nimport { TextField, Button, Typography, Box } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Update() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    setUser\n  } = useContext(AuthContext);\n  const {\n    setLoading\n  } = useLoading();\n  const [name, setName] = useState('');\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (!user || parseInt(id) !== user.id) {\n      navigate(`/users/${id}`);\n      return;\n    }\n    setLoading(true);\n    userService.get(id).then(response => {\n      setName(response.name || '');\n      setLoading(false);\n    }).catch(err => {\n      var _err$response, _err$response$data;\n      setError(err.message === 'Network Error' ? 'Не удалось подключиться к серверу. Убедитесь, что бэкенд запущен на http://localhost:8000 и CORS настроен.' : ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message || 'Произошла ошибка при загрузке данных');\n      setLoading(false);\n    });\n  }, [id, user, navigate, setLoading]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const updatedUser = await userService.update(id, {\n        name\n      });\n      setUser(updatedUser);\n      navigate(`/users/${id}`);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(err.message === 'Network Error' ? 'Не удалось подключиться к серверу. Убедитесь, что бэкенд запущен на http://localhost:8000 и CORS настроен.' : ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || err.message || 'Произошла ошибка при сохранении');\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u0418\\u043C\\u044F\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        fullWidth: true,\n        margin: \"normal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        style: {\n          marginTop: '1rem'\n        },\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(Update, \"bskUFUs3zWJ6o1GAwZ1A6pe0+LA=\", false, function () {\n  return [useParams, useNavigate, useLoading];\n});\n_c = Update;\nvar _c;\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","userService","AuthContext","useLoading","TextField","Button","Typography","Box","jsxDEV","_jsxDEV","Update","_s","id","navigate","user","setUser","setLoading","name","setName","error","setError","parseInt","get","then","response","catch","err","_err$response","_err$response$data","message","data","detail","handleSubmit","e","preventDefault","updatedUser","update","_err$response2","_err$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","gutterBottom","onSubmit","label","value","onChange","target","fullWidth","margin","type","color","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/zo-al/Desktop/studa_practe/frontend/src/components/Update.js"],"sourcesContent":["// frontend/src/components/Update.js\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { userService } from '../services/userService';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { useLoading } from '../contexts/LoadingContext';\r\nimport { TextField, Button, Typography, Box } from '@mui/material';\r\n\r\nexport default function Update() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, setUser } = useContext(AuthContext);\r\n  const { setLoading } = useLoading();\r\n  const [name, setName] = useState('');\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user || parseInt(id) !== user.id) {\r\n      navigate(`/users/${id}`);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    userService\r\n      .get(id)\r\n      .then((response) => {\r\n        setName(response.name || '');\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setError(\r\n          err.message === 'Network Error'\r\n            ? 'Не удалось подключиться к серверу. Убедитесь, что бэкенд запущен на http://localhost:8000 и CORS настроен.'\r\n            : err.response?.data?.detail || err.message || 'Произошла ошибка при загрузке данных'\r\n        );\r\n        setLoading(false);\r\n      });\r\n  }, [id, user, navigate, setLoading]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const updatedUser = await userService.update(id, { name });\r\n      setUser(updatedUser);\r\n      navigate(`/users/${id}`);\r\n    } catch (err) {\r\n      setError(\r\n        err.message === 'Network Error'\r\n          ? 'Не удалось подключиться к серверу. Убедитесь, что бэкенд запущен на http://localhost:8000 и CORS настроен.'\r\n          : err.response?.data?.detail || err.message || 'Произошла ошибка при сохранении'\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Ошибка: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <Box className=\"container\">\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Обновить профиль\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Имя\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          fullWidth\r\n          style={{ marginTop: '1rem' }}\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </form>\r\n    </Box>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}