{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zo-al\\\\Desktop\\\\studa_practe\\\\frontend\\\\src\\\\components\\\\Update.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/Update.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { userService } from '../services/userService';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { useLoading } from '../contexts/LoadingContext';\nimport { TextField, Button, Typography, Box } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Update() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user,\n    setUser\n  } = useContext(AuthContext);\n  const {\n    setLoading\n  } = useLoading();\n  const [name, setName] = useState('');\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (!user || parseInt(id) !== user.id) {\n      navigate(`/users/${id}`);\n      return;\n    }\n    setLoading(true);\n    userService.get(id).then(response => {\n      setName(response.name || '');\n      setLoading(false);\n    }).catch(err => {\n      var _err$response, _err$response2, _err$response3, _err$response3$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401 ? 'Необходима авторизация' : ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 404 ? 'Пользователь не найден' : ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.detail) || err.message || 'Произошла ошибка при загрузке данных');\n      setLoading(false);\n    });\n  }, [id, user, navigate, setLoading]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const updatedUser = await userService.update(id, {\n        name\n      });\n      setUser(updatedUser);\n      navigate(`/users/${id}`);\n    } catch (err) {\n      var _err$response4, _err$response5, _err$response6, _err$response6$data;\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.status) === 401 ? 'Необходима авторизация' : ((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : _err$response5.status) === 404 ? 'Пользователь не найден' : ((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.detail) || err.message || 'Произошла ошибка при сохранении');\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u0418\\u043C\\u044F\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        fullWidth: true,\n        margin: \"normal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\",\n        fullWidth: true,\n        style: {\n          marginTop: '1rem'\n        },\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(Update, \"bskUFUs3zWJ6o1GAwZ1A6pe0+LA=\", false, function () {\n  return [useParams, useNavigate, useLoading];\n});\n_c = Update;\nvar _c;\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","userService","AuthContext","useLoading","TextField","Button","Typography","Box","jsxDEV","_jsxDEV","Update","_s","id","navigate","user","setUser","setLoading","name","setName","error","setError","parseInt","get","then","response","catch","err","_err$response","_err$response2","_err$response3","_err$response3$data","status","data","detail","message","handleSubmit","e","preventDefault","updatedUser","update","_err$response4","_err$response5","_err$response6","_err$response6$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","gutterBottom","onSubmit","label","value","onChange","target","fullWidth","margin","type","color","style","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/zo-al/Desktop/studa_practe/frontend/src/components/Update.js"],"sourcesContent":["// frontend/src/components/Update.js\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { userService } from '../services/userService';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\nimport { useLoading } from '../contexts/LoadingContext';\r\nimport { TextField, Button, Typography, Box } from '@mui/material';\r\n\r\nexport default function Update() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, setUser } = useContext(AuthContext);\r\n  const { setLoading } = useLoading();\r\n  const [name, setName] = useState('');\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!user || parseInt(id) !== user.id) {\r\n      navigate(`/users/${id}`);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    userService\r\n      .get(id)\r\n      .then((response) => {\r\n        setName(response.name || '');\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setError(\r\n          err.response?.status === 401\r\n            ? 'Необходима авторизация'\r\n            : err.response?.status === 404\r\n            ? 'Пользователь не найден'\r\n            : err.response?.data?.detail || err.message || 'Произошла ошибка при загрузке данных'\r\n        );\r\n        setLoading(false);\r\n      });\r\n  }, [id, user, navigate, setLoading]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const updatedUser = await userService.update(id, { name });\r\n      setUser(updatedUser);\r\n      navigate(`/users/${id}`);\r\n    } catch (err) {\r\n      setError(\r\n        err.response?.status === 401\r\n          ? 'Необходима авторизация'\r\n          : err.response?.status === 404\r\n          ? 'Пользователь не найден'\r\n          : err.response?.data?.detail || err.message || 'Произошла ошибка при сохранении'\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Ошибка: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <Box className=\"container\">\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Обновить профиль\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Имя\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          fullWidth\r\n          style={{ marginTop: '1rem' }}\r\n        >\r\n          Сохранить\r\n        </Button>\r\n      </form>\r\n    </Box>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}